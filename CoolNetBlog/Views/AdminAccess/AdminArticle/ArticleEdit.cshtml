@model ArticleViewModel
<div asp-validation-summary="All" class="text-danger">
</div>
<form method="post">
    <div class="form-group">
        <input asp-for="PassToken" type="hidden" value="@Model.PassToken" class="form-control">
    </div>
    <div class="form-group">
        <input asp-for="Id" type="hidden" value="@Model.Id" class="form-control">
    </div>
    <div class="form-group row">
    <label asp-for="Title" class="col-sm-2 col-form-label">标题</label>
    <div class="col-sm-10">
        <input asp-for="Title"  type="text" class="form-control" maxlength="25">
    </div>
    </div>
    <div class="form-group row">
    <label asp-for="Abstract" class="col-sm-2 col-form-label">摘要描述</label>
    <div class="col-sm-10">
        <input asp-for="Abstract" type="text" class="form-control" maxlength="150">
    </div>
    </div>
    <div class="form-group row">
    <label for="textarea">主体内容</label>
    <textarea asp-for="Content" class="form-control" id="textarea" rows="10" maxlength="2500"></textarea>
    </div>
    <!--富文本按钮组-->
    <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group mr-2" role="group" aria-label="First group">
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('h3')">大标题</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('h5')">小型标题</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('strong')">粗体</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('em')">斜体</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('u')">下划线</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('del')">中间线文本</button>
        </div>
        <div class="btn-group mr-2" role="group" aria-label="Second group">
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('br')">另起一行</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('code')">代码块</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('mark')">标记</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('a')">外链接</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('blockquote')">引用文</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('ul')">列表项</button>
        </div>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('bimg')">图片链接(放大尺寸,会损失质量)</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('oimg')">图片链接(原始尺寸)</button>
        <button type="button" class="btn btn-secondary" onclick="RichElementsPut('cimg')">图片链接(迷你式)</button>
    </div>
    <br/>
    <div class="form-row align-items-center">
        <div class="col-auto my-1">
            <div class="custom-control custom-checkbox mr-sm-2">
            <label class="custom-control-label">存放的菜单</label>
            </div>
        </div>
        <div class="col-auto my-1">
            <select class="custom-select mr-sm-2"  asp-for="MenuId" >
            @foreach (var menuSel in @Model.MenuSelectList)
            {
                // 若文章的菜单id有值，则一定能匹配到菜单id，默认选中。没有值便是新增文章
                var arr = Model.MenuId==menuSel.Value  ? "selected" : "";
                <!option asp-for="MenuId" name="MenuId" value="@menuSel.Value" @arr>@menuSel.Text</!option>
            }
            </select>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">是否显示文章的标题</div>
        <div class="col-sm-10">
            <div class="form-check">
            @if (Model.MenuId<=0)
            {
                <input asp-for="IsShowTitle"  class="form-check-input" type="checkbox" checked>
            }else{
                <input asp-for="IsShowTitle"  class="form-check-input" type="checkbox">
            }
            <label asp-for="IsShowTitle" class="form-check-label">(不勾选可以在文章列表中隐藏标题)</label>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">这是草稿</div>
        <div class="col-sm-10">
            <div class="form-check">
            <input asp-for="IsDraft"  class="form-check-input" type="checkbox">
            <label asp-for="IsDraft" class="form-check-label" for="gridCheck1">(草稿文章不会显示)</label>
            </div>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-2">隐私文章</div>
        <div class="col-sm-10">
            <div class="form-check">
            <input asp-for="IsLock"  class="form-check-input" type="checkbox" onchange="LockChange()">
            <label asp-for="IsLock" class="form-check-label" for="gridCheck1">(是否隐私文章，隐私文章需在页面解锁才显示主体内容)</label>
            </div>
        </div>
    </div>
    <div id="lockHidDiv" class="form-group row" @(Model.IsLock?"":"hidden='hidden'")>
        <label asp-for="LockPassword" class="col-sm-2 col-form-label">密码</label>
        <div class="col-sm-10">
            <input asp-for="LockPassword" type="text" class="form-control" placeholder="若设为隐私文章，请设置解锁密码">
        </div>
    </div>

    <div class="form-group row">
    <label asp-for="Labels" class="col-sm-2 col-form-label">标签</label>
    <p>(标签相当于文章提炼关键字词，可以设置自定义词汇，多个标签请用空格或逗号隔开吧！)</p>
    <label class="col-sm-2 col-form-label"></label>
    <div class="col-sm-10">
        <input asp-for="Labels" type="text" class="form-control" maxlength="50">
    </div>
    </div>
    <div class="form-group row">
    <label asp-for="CustUri" class="col-sm-2 col-form-label">自定义文章Uri</label>
    <p>(你可以自定义文章Uri，这样可以使用特定的Uri访问此篇文章，若不需要可以忽略哦)</p>
    <label class="col-sm-2 col-form-label"></label>
    <div class="col-sm-10">
        <input asp-for="CustUri" type="text" class="form-control" maxlength="50">
    </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-10">
            <button asp-action="ArticleEdit" asp-controller="AdminArticle" type="submit" class="btn btn-primary">发表(￣︶￣)↗</button>
        </div>
    </div>
</form>

<script>
    function LockChange(){
        var obj = document.getElementById("lockHidDiv");
        if(obj["hidden"]){
            obj.removeAttribute("hidden");
        }else{
            obj.setAttribute("hidden", "hidden");
        }
    }

    //function RichElementsPut(eName){
    //    switch(eName)
    //    {
    //        case 'h3':
    //            $('#textarea').val($('#textarea').val()+'<h3>输入文字</h3>');
    //            break;
    //        case 'h5':
    //            $('#textarea').val($('#textarea').val()+'<h5>输入文字</h5>');
    //            break;
    //        case 'strong':
    //            $('#textarea').val($('#textarea').val()+'<strong>输入文字</strong>');
    //            break;
    //        case 'em':
    //            $('#textarea').val($('#textarea').val()+'<em>输入文字</em>');
    //            break;
    //        case 'u':
    //            $('#textarea').val($('#textarea').val()+'<u>输入文字</u>');
    //            break;
    //        case 'del':
    //           $('#textarea').val($('#textarea').val()+'<del>输入文字</del>');
    //            break;
    //        case 'br':
    //            $('#textarea').val($('#textarea').val()+'</br>');
    //            break;
    //        case 'code':
    //            $('#textarea').val($('#textarea').val()+'<code>输入代码块</code>');
    //            break;
    //        case 'mark':
    //            $('#textarea').val($('#textarea').val()+'<mark>输入标记</mark>');
    //            break;
    //        case 'a':
    //            $('#textarea').val($('#textarea').val()+'<a class="text text-dark" href="链接地址">链接名称</a>');
    //            break;
    //        case 'blockquote':
    //            $('#textarea').val($('#textarea').val()+'<blockquote><em>输入引用文<em/></blockquote>');
    //            break;
    //        case 'ul':
    //            $('#textarea').val($('#textarea').val()+'<ul><li>1.XX</li><li>2.XX</li><li>3.XX</li></ul>');
    //            break;
    //        case 'bimg':
    //            $('#textarea').val($('#textarea').val()+'<img src="/articleImgs/输入图片实际名" style="width:100%;height:auto;" class="img-fluid mx-auto d-block" alt="">');
    //            break;
    //        case 'oimg':
    //            $('#textarea').val($('#textarea').val()+'<img src="/articleImgs/输入图片实际名" style="max-width:100%;max-height:100%;" class="img-fluid mx-auto d-block" alt="">');
    //            break;
    //        case 'cimg':
    //            $('#textarea').val($('#textarea').val()+'<img src="/articleImgs/输入图片实际名" style="width:40%;height:40%;" class="img-thumbnail rounded mx-auto d-block" alt="">');
    //            break;
    //        default:
    //            return;
    //    }
    //}


    function RichElementsPut(eName){
        var htmlTextToPut = "";
        switch(eName)
        {
            case 'h3':
                htmlTextToPut = '<h3>输入文字</h3>';
                break;
            case 'h5':
                htmlTextToPut = '<h5>输入文字</h5>';
                break;
            case 'strong':
                htmlTextToPut = '<strong>输入文字</strong>';
                break;
            case 'em':
                htmlTextToPut = '<em>输入文字</em>';
                break;
            case 'u':
                htmlTextToPut = '<u>输入文字</u>';
                break;
            case 'del':
                htmlTextToPut = '<del>输入文字</del>';
                break;
            case 'br':
                htmlTextToPut = '</br>';
                break;
            case 'code':
                htmlTextToPut = '<code>输入代码块</code>';
                break;
            case 'mark':
                htmlTextToPut = '<mark>输入标记</mark>';
                break;
            case 'a':
                htmlTextToPut = '<a class="text text-dark" href="链接地址">链接名称</a>';
                break;
            case 'blockquote':
                htmlTextToPut = '<blockquote><em>输入引用文<em/></blockquote>';
                break;
            case 'ul':
                htmlTextToPut = '<ul><li>1.XX</li><li>2.XX</li><li>3.XX</li></ul>';
                break;
            case 'bimg':
                htmlTextToPut = '<img src="/articleImgs/输入图片实际名" style="width:100%;height:auto;" class="img-fluid mx-auto d-block" alt="">';
                break;
            case 'oimg':
                htmlTextToPut = '<img src="/articleImgs/输入图片实际名" style="max-width:100%;max-height:100%;" class="img-fluid mx-auto d-block" alt="">';
                break;
            case 'cimg':
                htmlTextToPut = '<img src="/articleImgs/输入图片实际名" style="width:40%;height:40%;" class="img-thumbnail rounded mx-auto d-block" alt="">';
                break;
            default:
                return;
        }
        var caretPos = $("#textarea").prop("selectionStart");
        var textAreaTxt = $("#textarea").val();
        $("#textarea").val(textAreaTxt.substring(0, caretPos) + htmlTextToPut + textAreaTxt.substring(caretPos));
    }
</script>
